# 사용자 시나리오: 계정 생성

## 시나리오 1: 성공적인 계정 생성 (정상 경로)

**배경:** 사라는 멘토와 미팅을 예약하기 위해 커피챗 플랫폼에 가입하려고 합니다.

**진행 단계:**
1. 사라가 회원가입 페이지로 이동합니다
2. 다음 정보를 입력합니다:
   - 사용자명: `sarah.kim`
   - 이메일: `sarah.kim@example.com`
   - 표시명: `Sarah Kim`
   - 비밀번호: `SecurePass123!`
   - is_host: `false` (기본값)
3. "계정 생성" 버튼을 클릭합니다
4. 시스템이 모든 입력값을 검증합니다 (모두 유효)
5. 시스템이 사용자명 중복을 확인합니다 (사용 가능)
6. 시스템이 이메일 중복을 확인합니다 (사용 가능)
7. 시스템이 비밀번호를 해시 처리합니다
8. 시스템이 데이터베이스에 사용자 계정을 생성합니다
9. 시스템이 응답을 반환합니다:
   ```json
   {
     "username": "sarah.kim",
     "display_name": "Sarah Kim",
     "is_host": false
   }
   ```
10. 사라가 로그인 페이지 또는 대시보드로 리디렉션됩니다
11. 사라는 user_detail API를 사용하여 계정을 확인할 수 있습니다

**예상 결과:** ✅ 계정이 성공적으로 생성됨

---

## 시나리오 2: 자동 생성된 표시명으로 계정 생성

**배경:** 존은 표시명을 입력하지 않고 빠르게 계정을 만들고 싶습니다.

**진행 단계:**
1. 존이 회원가입 페이지로 이동합니다
2. 다음 정보를 입력합니다:
   - 사용자명: `john-doe`
   - 이메일: `john@example.com`
   - 표시명: _(입력하지 않음)_
   - 비밀번호: `MyPassword2024`
3. "계정 생성" 버튼을 클릭합니다
4. 시스템이 표시명이 누락되었음을 감지합니다
5. 시스템이 무작위 8글자 문자열을 생성합니다: `X7k9Qp2M`
6. 시스템이 자동 생성된 표시명으로 계정을 생성합니다
7. 시스템이 응답을 반환합니다:
   ```json
   {
     "username": "john-doe",
     "display_name": "X7k9Qp2M",
     "is_host": false
   }
   ```

**예상 결과:** ✅ 자동 생성된 표시명으로 계정 생성됨

---

## 시나리오 3: 잘못된 사용자명 형식

**배경:** 마이크가 유효하지 않은 사용자명으로 계정을 만들려고 시도합니다.

**진행 단계:**
1. 마이크가 회원가입 페이지로 이동합니다
2. 다음 정보를 입력합니다:
   - 사용자명: `mi` _(2글자만, 최소 4글자 필요)_
   - 이메일: `mike@example.com`
   - 표시명: `Mike`
   - 비밀번호: `Password123`
3. "계정 생성" 버튼을 클릭합니다
4. 시스템이 사용자명을 검증합니다
5. 시스템이 사용자명이 너무 짧다는 것을 감지합니다 (< 4글자)
6. 시스템이 오류를 반환합니다:
   ```json
   {
     "error": "사용자명이 유효하지 않습니다",
     "details": "사용자명은 4~40글자여야 합니다"
   }
   ```

**예상 결과:** ❌ 유효성 검사 오류로 계정 생성 실패

**기타 잘못된 경우:**
- 특수 문자가 포함된 사용자명: `mike@123` → 오류
- 40글자를 초과하는 사용자명 → 오류
- 공백이 포함된 사용자명: `mike smith` → 오류

---

## 시나리오 4: 중복 사용자명

**배경:** 리사가 이미 존재하는 사용자명으로 등록하려고 시도합니다.

**진행 단계:**
1. 리사가 회원가입 페이지로 이동합니다
2. 다음 정보를 입력합니다:
   - 사용자명: `sarah.kim` _(시나리오 1에서 이미 존재)_
   - 이메일: `lisa@example.com`
   - 표시명: `Lisa`
   - 비밀번호: `LisaPass2024`
3. "계정 생성" 버튼을 클릭합니다
4. 시스템이 입력값을 검증합니다 (형식은 모두 유효)
5. 시스템이 사용자명 중복을 확인합니다
6. 시스템이 기존 사용자명 `sarah.kim`을 발견합니다
7. 시스템이 오류를 반환합니다:
   ```json
   {
     "error": "사용자명이 이미 존재합니다"
   }
   ```

**예상 결과:** ❌ 중복 사용자명으로 인한 계정 생성 실패

---

## 시나리오 5: 잘못된 이메일 형식

**배경:** 데이비드가 유효하지 않은 이메일 주소를 입력합니다.

**진행 단계:**
1. 데이비드가 회원가입 페이지로 이동합니다
2. 다음 정보를 입력합니다:
   - 사용자명: `david.lee`
   - 이메일: `invalid-email` _(@ 및 도메인 누락)_
   - 표시명: `David Lee`
   - 비밀번호: `SecurePass123`
3. "계정 생성" 버튼을 클릭합니다
4. 시스템이 이메일 형식을 검증합니다
5. 시스템이 잘못된 이메일 형식을 감지합니다
6. 시스템이 오류를 반환합니다:
   ```json
   {
     "error": "이메일이 유효하지 않습니다",
     "details": "유효한 이메일 주소를 입력해주세요"
   }
   ```

**예상 결과:** ❌ 이메일 유효성 검사 오류로 계정 생성 실패

---

## 시나리오 6: 중복 이메일 주소

**배경:** 엠마가 이미 사용 중인 이메일로 등록하려고 시도합니다.

**진행 단계:**
1. 엠마가 회원가입 페이지로 이동합니다
2. 다음 정보를 입력합니다:
   - 사용자명: `emma.wilson`
   - 이메일: `sarah.kim@example.com` _(시나리오 1에서 이미 존재)_
   - 표시명: `Emma Wilson`
   - 비밀번호: `EmmaPass123`
3. "계정 생성" 버튼을 클릭합니다
4. 시스템이 입력값을 검증합니다
5. 시스템이 이메일 중복을 확인합니다 (데이터베이스 제약)
6. 시스템이 중복 이메일을 감지합니다
7. 시스템이 오류를 반환합니다:
   ```json
   {
     "error": "이메일이 이미 존재합니다"
   }
   ```

**예상 결과:** ❌ 중복 이메일로 인한 계정 생성 실패

---

## 시나리오 7: 잘못된 비밀번호 (너무 짧음)

**배경:** 톰이 약한 비밀번호로 계정을 만들려고 시도합니다.

**진행 단계:**
1. 톰이 회원가입 페이지로 이동합니다
2. 다음 정보를 입력합니다:
   - 사용자명: `tom.jones`
   - 이메일: `tom@example.com`
   - 표시명: `Tom`
   - 비밀번호: `pass` _(4글자만, 최소 8글자 필요)_
3. "계정 생성" 버튼을 클릭합니다
4. 시스템이 비밀번호를 검증합니다
5. 시스템이 비밀번호가 너무 짧다는 것을 감지합니다 (< 8글자)
6. 시스템이 오류를 반환합니다:
   ```json
   {
     "error": "비밀번호가 유효하지 않습니다",
     "details": "비밀번호는 8~128글자여야 합니다"
   }
   ```

**예상 결과:** ❌ 비밀번호 유효성 검사 오류로 계정 생성 실패

---

## 시나리오 8: 잘못된 표시명 (너무 짧음)

**배경:** 에이미가 너무 짧은 표시명을 입력합니다.

**진행 단계:**
1. 에이미가 회원가입 페이지로 이동합니다
2. 다음 정보를 입력합니다:
   - 사용자명: `amy.park`
   - 이메일: `amy@example.com`
   - 표시명: `A` _(1글자만, 최소 2글자 필요)_
   - 비밀번호: `AmyPass2024`
3. "계정 생성" 버튼을 클릭합니다
4. 시스템이 표시명을 검증합니다
5. 시스템이 표시명이 너무 짧다는 것을 감지합니다 (< 2글자)
6. 시스템이 오류를 반환합니다:
   ```json
   {
     "error": "표시명이 유효하지 않습니다",
     "details": "표시명은 2~40글자여야 합니다"
   }
   ```

**예상 결과:** ❌ 표시명 유효성 검사 오류로 계정 생성 실패

---

## 시나리오 9: 호스트 계정 생성

**배경:** 마르티네즈 박사는 멘토링 세션을 제공하기 위해 호스트로 계정을 만들고 싶습니다.

**진행 단계:**
1. 마르티네즈 박사가 회원가입 페이지로 이동합니다
2. 다음 정보를 입력합니다:
   - 사용자명: `dr.martinez`
   - 이메일: `martinez@example.com`
   - 표시명: `Dr. Martinez`
   - 비밀번호: `HostPassword123`
   - is_host: `true` _(호스트 옵션 선택)_
3. "계정 생성" 버튼을 클릭합니다
4. 시스템이 모든 입력값을 검증합니다 (모두 유효)
5. 시스템이 is_host=true로 계정을 생성합니다
6. 시스템이 응답을 반환합니다:
   ```json
   {
     "username": "dr.martinez",
     "display_name": "Dr. Martinez",
     "is_host": true
   }
   ```
7. 마르티네즈 박사가 호스트 온보딩 페이지로 리디렉션됩니다

**예상 결과:** ✅ 호스트 계정이 성공적으로 생성됨

---

## 시나리오 10: API를 통한 계정 확인

**배경:** 계정 생성 후, 사라가 user_detail API를 사용하여 계정을 확인합니다.

**진행 단계:**
1. 사라가 계정을 성공적으로 생성합니다 (사용자명: `sarah.kim`)
2. 계정 생성 응답을 받습니다
3. user_detail API를 호출합니다:
   ```
   GET /api/users/sarah.kim
   ```
4. 시스템이 데이터베이스에서 사용자 정보를 조회합니다
5. 시스템이 응답을 반환합니다:
   ```json
   {
     "username": "sarah.kim",
     "email": "sarah.kim@example.com",
     "display_name": "Sarah Kim",
     "is_host": false
   }
   ```
6. 사라가 계정 정보가 등록 내용과 일치하는지 확인합니다

**예상 결과:** ✅ API를 통해 계정이 성공적으로 확인됨

**참고:** 보안상의 이유로 비밀번호는 응답에 포함되지 않습니다.
