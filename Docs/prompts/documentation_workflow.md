# 개발 작업 문서화 워크플로우 프롬프트

## 목적
사용자가 작업 내용 정리를 요청할 때, 체계적으로 문서를 생성하기 위한 프롬프트입니다.

---

## 프롬프트

```markdown
# 작업 내용 문서화 가이드라인

## 1단계: 문서화 요청 감지

사용자가 다음과 같은 표현을 사용할 때 이 워크플로우를 시작합니다:
- "정리해줘"
- "문서화해줘"
- "오늘 작업한 것 정리해줘"
- "~에 대해서 정리해줘"
- "문서 작성해줘"

## 2단계: 정보 수집

AskUserQuestion 도구를 사용하여 다음 정보를 수집합니다:

### 질문 1: 정리할 범위
**질문**: "어떤 범위의 작업을 정리할까요?"
**옵션**:
1. 가장 최근 커밋 내용
2. 특정 기능/모듈 (예: 로그인, 회원가입 등)
3. 오늘 작업한 모든 내용
4. 특정 파일들의 변경사항

### 질문 2: 문서 키워드
**질문**: "문서 파일명에 사용할 키워드를 알려주세요"
**예시**: login_implementation, signup_api, database_migration

사용자가 명확하게 범위를 지정한 경우 이 단계를 생략할 수 있습니다.

## 3단계: 정보 분석 및 수집

범위에 따라 필요한 정보를 수집합니다:

### 코드 변경사항 확인
```bash
git status
git diff {범위에 해당하는 파일들}
git log --oneline -5  # 최근 커밋 확인
```

### 관련 파일 읽기
- 변경된 주요 파일들 Read
- 테스트 파일 확인
- 설정 파일 확인 (필요시)

### 테스트 실행 (선택사항)
```bash
pytest {관련 테스트 파일} -v
```

## 4단계: 문서 생성

`./docs/dev_log/{YYYYMMDD_키워드}.md` 형식으로 문서를 생성합니다.

### 문서 구조

```markdown
# {기능명} 문서

## [NOTE] 개요
- 작업의 목적과 배경
- 주요 구현 내용 요약

## [GOAL] 유저 시나리오
각 시나리오별로:
- 시나리오 제목 및 목표
- 단계별 상세 설명
- 예상 결과

시나리오 예시:
- 정상 케이스
- 에러 케이스 (입력 검증 실패, 인증 실패 등)
- 엣지 케이스

## [SECURITY] 보안 사양 (해당되는 경우)
- 입력 검증 규칙
- 암호화/해싱 방법
- 인증/인가 메커니즘
- 쿠키/세션 보안 설정

## [DIAGRAM] 시퀀스 다이어그램
mermaid sequenceDiagram을 사용하여:
- 사용자 → 클라이언트 → 서버 → DB 흐름
- 각 단계별 처리 로직
- 에러 처리 분기

## [FLOW] 플로우차트 (필요시)
mermaid flowchart를 사용하여:
- 의사결정 흐름
- 조건 분기
- 에러 처리 경로

## [STRUCTURE] 구현 파일 구조
```
디렉토리 구조와 각 파일의 역할 설명
```

## [API] API 명세 (해당되는 경우)
- 엔드포인트 URL 및 메서드
- Request 예시
- Response 예시 (성공/실패)
- HTTP 상태 코드
- 헤더 정보

## [TEST] 테스트 커버리지
- [O] 완료된 테스트
- [X] 미완료/TODO 테스트

## [NEXT] 다음 단계
- 개선이 필요한 부분
- TODO 리스트
- 알려진 이슈

## 주요 코드 스니펫 (선택사항)
핵심 구현 코드와 파일 경로:라인 번호 표시

## 커밋 정보 (해당되는 경우)
- 커밋 해시
- 커밋 메시지
- 변경 통계
```

## 5단계: 스타일 가이드

### 이모지 대체 규칙
모든 이모지는 알파벳 태그로 대체:
- 📌/📋/📝 → `[NOTE]`
- 🎯 → `[GOAL]`
- 🔐/🔒 → `[SECURITY]`
- 📊 → `[DIAGRAM]`
- 🔄 → `[FLOW]`
- 🗂️/📁 → `[STRUCTURE]`
- 🧪 → `[TEST]`
- ✅/✓ → `[O]` 또는 `O`
- ❌/✗/⏳ → `[X]` 또는 `X`
- 🚀/⏭️ → `[NEXT]`
- 💡 → `[TIP]`
- ⚠️ → `[WARNING]`
- 🐛 → `[BUG]`
- ⚡ → `[PERFORMANCE]`

### Mermaid 다이어그램 사용 기준
다음과 같은 경우 mermaid 다이어그램을 포함:
- **sequenceDiagram**: API 요청/응답 흐름, 컴포넌트 간 상호작용
- **flowchart**: 의사결정 로직, 조건 분기가 많은 프로세스
- **classDiagram**: 데이터 모델 관계 (필요시)
- **erDiagram**: DB 스키마 설계 (필요시)

### 파일명 규칙
- 형식: `YYYYMMDD_키워드.md`
- 키워드는 snake_case 사용
- 예시: `20260106_login_implementation.md`

### 작성 톤
- 명확하고 간결하게
- 기술적으로 정확하게
- 단계별로 구조화
- 코드 예시는 실제 구현 기준

## 6단계: 확인 및 완료

문서 생성 후 사용자에게 알립니다:
- 파일 경로
- 주요 섹션 요약
- 추가로 보완이 필요한 부분이 있다면 제안
```

---

## 실행 예시

### 사용자 요청
```
"오늘 작업한 로그인 기능 정리해줘"
```

### AI 응답
```
로그인 기능에 대한 문서를 작성하겠습니다.

[AskUserQuestion 실행]
1. 정리할 범위: 가장 최근 커밋 내용 (로그인 관련)
2. 키워드: login_implementation

[정보 수집]
- git status 확인
- 변경된 파일 읽기 (endpoints.py, schemas.py, utils.py 등)
- 테스트 실행

[문서 생성]
./docs/dev_log/20260106_login_implementation.md 파일 생성

완료되었습니다!
```

---

## 주의사항

1. **범위가 너무 넓은 경우**: 사용자에게 더 구체적인 범위를 요청
2. **정보가 부족한 경우**: 추가로 필요한 정보를 명시적으로 요청
3. **민감 정보**: SECRET_KEY 등 민감한 정보는 문서에 포함하지 않음
4. **코드 스니펫**: 너무 길면 핵심 부분만 발췌
5. **이미 존재하는 파일**: 덮어쓰기 전에 사용자에게 확인

---

## 커스터마이징 가능한 부분

프로젝트 특성에 따라 다음을 조정할 수 있습니다:
- 문서 저장 경로 (./docs/dev_log)
- 파일명 형식
- 문서 섹션 구조
- mermaid 다이어그램 스타일
- 이모지 태그 규칙
